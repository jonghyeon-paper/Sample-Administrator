<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.skplanet.iba.domain.sample1.Sample1Mapper">
	<sql id="selectList">
		SELECT SAMPLE_ID,
		           CODE,
		           NAME,
		           REG_DATE,
		           REG_USER_ID,
		           MOD_DATE,
		           MOD_USER_ID
		FROM   SAMPLE
	</sql>

	<sql id="selectListWhere">
    	<where>
    		<if test="code != null">
				CODE = #{code}
			</if>
			<if test="name != null">
				AND NAME = #{name}
			</if>
		</where>
    </sql>
    
    	<sql id="selectPageList">
		SELECT SAMPLE_ID,
		           CODE,
		           NAME,
		           REG_DATE,
		           REG_USER_ID,
		           MOD_DATE,
		           MOD_USER_ID
		FROM   SAMPLE
	</sql>

	<sql id="selectPageListWhere">
    	<where>
    		<if test="sample1.code != null">
				CODE = #{sample1.code}
			</if>
			<if test="sample1.name != null">
				AND NAME = #{sample1.name}
			</if>
		</where>
    </sql>
  	
	<select id="selectList" resultType="com.skplanet.iba.domain.sample1.Sample1">
		<include refid="selectList"/>
		<include refid="selectListWhere"/>
	</select>
	
	<select id="selectPageList" resultType="com.skplanet.iba.domain.sample1.Sample1">
		<include refid="selectPageList"/>
		<include refid="selectPageListWhere"/>
		<include refid="common.paging"/>
	</select>
	
	<select id="selectOne" resultType="com.skplanet.iba.domain.sample1.Sample1">
		SELECT SAMPLE_ID,
		           CODE,
		           NAME,
		           REG_DATE,
		           REG_USER_ID,
		           MOD_DATE,
		           MOD_USER_ID
		FROM   SAMPLE
    	<where>
				SAMPLE_ID = #{id}
		</where>		
	</select>
		
	<select id="selectTotalCount" resultType="Integer">
		SELECT COUNT(*) AS totalCount 
	    FROM ( <include refid="selectList"/> ) T1
	</select>
	
	<insert id="insert" parameterType="com.skplanet.iba.domain.sample1.Sample1">
		INSERT INTO SAMPLE(
			CODE,
			NAME,
			REG_DATE,
			REG_USER_ID
		) VALUES 
		<foreach collection="list" item="item" separator=", ">
		(
			#{item.code},
			#{item.name},
			NOW(),
			#{item.regUserId}
		)
		</foreach>
	</insert>
	
	<update id="update" parameterType="com.skplanet.iba.domain.sample1.Sample1">
		UPDATE SAMPLE
			<set>
			<if test="code != null">
				CODE = #{code},
			</if>	
			<if test="name != null">
				NAME = #{name},
			</if>
			<if test="useYn != null">
				USE_YN = #{useYn},
			</if>
			<if test="modDate != null">
				MOD_DATE = #{modDate},
			</if>
			<if test="modUserId != null">
				MOD_USER_ID = #{modUserId},
			</if>
			</set>
			       WHERE ID = #{id}
	</update>

	<delete id="delete">
		DELETE FROM SAMPLE
		<where>
			<choose>
				<when test="ids != null">
					AND ID IN
					<foreach item="id" index="index" collection="ids" open="(" separator="," close=")">
						#{id}
					</foreach>
				</when>
				<otherwise>
					AND ID = #{id}
				</otherwise>
			</choose>
		</where>
	</delete>	
</mapper>